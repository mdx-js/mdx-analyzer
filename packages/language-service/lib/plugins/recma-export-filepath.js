/**
 * @import {VirtualCodePlugin} from './plugin.js'
 */

/**
 * @param {unknown} options
 * @returns {VirtualCodePlugin}
 */
export function recmaExportFilepath(options) {
  const opts = typeof options === 'object' && options !== null ? options : {}
  const name = 'name' in opts ? String(opts.name) : 'filepath'

  return () => {
    return {
      finalize() {
        return (
          '/** Generated by [recma-export-filepath](https://github.com/remcohaszing/recma-export-filepath) */\nexport const ' +
          name +
          " = /** @type {string} */ ('')"
        )
      }
    }
  }
}
